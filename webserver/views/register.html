{{##def.page_title = 'Register' #}}

{{##def.content:
<script type="text/javascript">
    window.onload = function () {
        if (document.getElementById('confirmation') !== null) {
            document.getElementById('confirmation').onchange = validatePassword;
            document.getElementById('password').onchange = validatePassword;
        }
    };

    function validatePassword() {
        var password = document.getElementById('password').value;
        var confirm = document.getElementById('confirmation').value;
        if (password != confirm) {
            document.getElementById('confirmation').setCustomValidity("Confirmation and password should be the same");
        } else {
            document.getElementById('confirmation').setCustomValidity('');
        }
    }
</script>

<div class="container mx-auto px-4 py-8 max-w-2xl">
    <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-8 border border-slate-700 shadow-xl">

        <form action="/register" method="post" class="space-y-6">

            <!-- Header -->
            <div class="border-b border-slate-700 pb-4">
                <h5 class="text-3xl font-bold text-white">
                    Create a new account
                    <small class="block text-base font-normal text-slate-400 mt-2">
                        <a href="login" class="text-cyan-400 hover:text-cyan-300 transition-colors">already have one?</a>
                    </small>
                </h5>
            </div>

            <!-- Username Field -->
            <div class="space-y-2">
                <label for="username" class="block text-sm font-semibold text-slate-300">
                    Username
                </label>
                <input
                    id="username"
                    type="text"
                    name="user[name]"
                    value="{{?it.values}}{{!it.values.name}}{{?}}"
                    autocomplete="off"
                    pattern="[A-Za-z0-9_-]{3,16}"
                    title="Username may only include letters, numbers, underscores, and hyphens (3â€“16 chars)"
                    required
                    class="w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"
                    placeholder="Enter username"
                />
                <p class="text-sm text-slate-400">
                    3-16 characters: letters, numbers, underscores, and hyphens only
                </p>
            </div>

            <!-- Email Field -->
            <div class="space-y-2">
                <label for="email" class="block text-sm font-semibold text-slate-300">
                    Recovery Email <span class="text-slate-500">(Optional)</span>
                </label>
                <input
                    type="email"
                    id="email"
                    value="{{?it.values}}{{!it.values.email}}{{?}}"
                    placeholder="you@email.com"
                    name="user[email]"
                    autocomplete="off"
                    class="w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"
                />
                <div class="bg-amber-900/20 border border-amber-700/50 rounded-lg p-3">
                    <p class="text-sm text-amber-200">
                        <span class="font-semibold">Optional</span> although we <span class="font-semibold">strongly advise you to use one</span>, otherwise it is <span class="font-semibold">not possible</span> to password reset!
                    </p>
                </div>
            </div>

            <!-- Password Field -->
            <div class="space-y-2">
                <label for="password" class="block text-sm font-semibold text-slate-300">
                    Password
                </label>
                <input
                    id="password"
                    type="password"
                    value="{{?it.values}}{{!it.values.password}}{{?}}"
                    name="user[password]"
                    autocomplete="off"
                    pattern=".{7,200}"
                    title="Password should be at least 7 characters"
                    required
                    class="w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"
                    placeholder="Enter password"
                />
                <p class="text-sm text-slate-400">
                    Pick something secure, at least 7 characters
                </p>
            </div>

            <!-- Confirm Password Field -->
            <div class="space-y-2">
                <label for="confirmation" class="block text-sm font-semibold text-slate-300">
                    Confirm Password
                </label>
                <input
                    id="confirmation"
                    type="password"
                    value="{{?it.values}}{{!it.values.confirm}}{{?}}"
                    name="user[confirm]"
                    autocomplete="off"
                    pattern=".{7,200}"
                    data-equal-id="password"
                    required
                    class="w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"
                    placeholder="Confirm your password"
                />
            </div>

            <!-- Submit Button -->
            <div class="pt-4">
                <button
                    id="registerSubmit"
                    type="submit"
                    class="w-full px-6 py-4 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 rounded-lg font-bold text-lg text-white shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200"
                >
                    Register
                </button>
            </div>

        </form>
    </div>
</div>

<style>
    input:invalid:not(:placeholder-shown) {
        border-color: rgb(239 68 68);
    }

    input:valid:not(:placeholder-shown) {
        border-color: rgb(34 197 94);
    }
</style>

#}}
{{#def.include('./template/main_new')}}
