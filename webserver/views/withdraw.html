{{##def.page_title = 'Withdraw' #}}
{{##def.content:
<script type="text/javascript">
    function logout() {
        if (document.getElementById('logout')) {
            if (confirm("Are you sure you want to log out?")) {
                document.getElementById("logout").submit();
            }
        }
    }
</script>

<form action="/logout" method="post" id='logout'></form>

<div class="container mx-auto px-4 py-8 max-w-7xl">
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
        
        <!-- Sidebar Navigation -->
        <div class="lg:col-span-1">
            <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl border border-slate-700 shadow-xl overflow-hidden sticky top-4">
                <div class="p-6 border-b border-slate-700">
                    <h6 class="text-lg font-bold text-white">Settings</h6>
                </div>
                <nav class="p-2">
                    <a href="/account" class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-700/50 hover:text-white font-medium mb-1 transition-all">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        Account
                    </a>
                    <a href="/security" class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-700/50 hover:text-white font-medium mb-1 transition-all">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                        </svg>
                        Security
                    </a>
                    <a href="/deposit" class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-700/50 hover:text-white font-medium mb-1 transition-all">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                        </svg>
                        Deposit
                    </a>
                    <a href="/withdraw" class="flex items-center gap-3 px-4 py-3 rounded-lg bg-gradient-to-r from-cyan-600 to-blue-600 text-white font-semibold mb-1 transition-all">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                        </svg>
                        Withdraw
                    </a>
                    <a href="/support" class="flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-700/50 hover:text-white font-medium mb-1 transition-all">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                        Support
                    </a>
                    <button onclick="logout();" class="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-400 hover:bg-red-900/20 hover:text-red-300 font-medium transition-all">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                        </svg>
                        Logout
                    </button>
                </nav>
            </div>
        </div>

        <!-- Main Content -->
        <div class="lg:col-span-3 space-y-6">

            <!-- Withdrawal History -->
            <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-8 border border-slate-700 shadow-xl">
                <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6">
                    <div class="flex items-center gap-3">
                        <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-full flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
                            </svg>
                        </div>
                        <div>
                            <h5 class="text-2xl font-bold text-white">Withdrawal History</h5>
                            {{?it.user.withdrawals.length > 0}}
                                <p class="text-sm text-slate-400 mt-1">{{=it.user.withdrawals.length}} {{?it.user.withdrawals.length === 1}}withdrawal{{??}}withdrawals{{?}}</p>
                            {{?}}
                        </div>
                    </div>
                    <a href="/withdraw/request" class="px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-lg font-bold text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                        </svg>
                        Request Withdrawal
                    </a>
                </div>

                {{?it.user.withdrawals.length > 0}}
                    <div class="overflow-x-auto rounded-lg border border-slate-700">
                        <table class="w-full">
                            <thead>
                                <tr class="bg-slate-700/50">
                                    <th class="text-left py-4 px-6 font-bold text-slate-200 text-sm uppercase tracking-wider">Amount</th>
                                    <th class="text-left py-4 px-6 font-bold text-slate-200 text-sm uppercase tracking-wider">Destination</th>
                                    <th class="text-left py-4 px-6 font-bold text-slate-200 text-sm uppercase tracking-wider">Status</th>
                                    <th class="text-left py-4 px-6 font-bold text-slate-200 text-sm uppercase tracking-wider hidden lg:table-cell">Date</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-700/50">
                                {{~it.user.withdrawals :withdrawal:index}}
                                    <tr class="hover:bg-slate-700/20 transition-colors">
                                        <td class="py-4 px-6">
                                            <span class="text-orange-400 font-bold text-lg">-{{#def.format: {n: withdrawal.amount, decimals: 2 } }}</span>
                                            <span class="text-slate-400 text-sm ml-1">bits</span>
                                        </td>
                                        <td class="py-4 px-6">
                                            <span class="lg:hidden text-white font-mono text-sm">{{=withdrawal.shortDestination}}...</span>
                                            <span class="hidden lg:inline text-white font-mono text-sm">{{=withdrawal.destination}}</span>
                                        </td>
                                        <td class="py-4 px-6">
                                            {{?withdrawal.status}}
                                                <a href="https://blockchain.info/tx/{{=withdrawal.status}}" target="_blank" class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-green-900/30 border border-green-700/50 text-green-400 font-semibold text-sm hover:bg-green-900/40 transition-colors">
                                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                                    </svg>
                                                    Transferred
                                                </a>
                                            {{??}}
                                                <span class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-900/30 border border-blue-700/50 text-blue-400 font-semibold text-sm">
                                                    <svg class="w-4 h-4 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                                    </svg>
                                                    In Progress
                                                </span>
                                            {{?}}
                                        </td>
                                        <td class="py-4 px-6 hidden lg:table-cell">
                                            <span class="text-white font-medium">{{=withdrawal.created}}</span>
                                        </td>
                                    </tr>
                                {{~}}
                            </tbody>
                        </table>
                    </div>
                {{??}}
                    <div class="text-center py-12">
                        <div class="w-20 h-20 bg-slate-700/30 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-10 h-10 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
                            </svg>
                        </div>
                        <h6 class="text-xl font-bold text-slate-300 mb-2">No Withdrawals Yet</h6>
                        <p class="text-slate-400 mb-6">You haven't made any withdrawals from your account</p>
                        <a href="/withdraw/request" class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-lg font-bold text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                            </svg>
                            Request Your First Withdrawal
                        </a>
                    </div>
                {{?}}
            </div>

        </div>
    </div>
</div>

<style>
    @keyframes spin {
        from {
            transform: rotate(0deg);
        }
        to {
            transform: rotate(360deg);
        }
    }
    .animate-spin {
        animation: spin 1s linear infinite;
    }
</style>

#}}
{{#def.include('./template/main_new')}}